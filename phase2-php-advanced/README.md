# Phase 2: PHP発展編 - 実践的な機能 🎮

**学習目標**：実践的なWebアプリケーションに必要な機能を実装できるようになる！

---

## 📖 このPhaseで学ぶこと

Phase 2では、Phase 1で学んだPHP基礎を土台に、**実際のWebアプリケーション開発に必要な機能**を学びます！

- ファイル操作（読み書き、CSV、アップロード）🔒
- セッション管理（ログイン機能）🔒
- Cookie（設定の保存、Remember Me）
- エラーハンドリング（try-catch、ログ）
- オブジェクト指向プログラミング（OOP）の基礎

**Phase 1との関係**：

- Phase 1の知識（変数、条件分岐、ループ、関数、配列、フォーム）が前提
- Phase 1で学んだ基礎を使って、より実践的な機能を実装

---

## 🎯 Phase 2のゴール

このPhaseを終えると、こんなことができるようになるよ！

- 📁 **ファイル操作**：CSVファイルのインポート・エクスポート、画像アップロード
- 🔐 **セキュアなログイン機能**：パスワードハッシュ化、セッション管理、セッションハイジャック対策
- 🍪 **Cookie管理**：ユーザー設定の保存、自動ログイン機能
- ⚠️ **堅牢なコード**：エラーハンドリング、ログ記録、本番環境対応
- 🏗️ **OOPの基礎**：クラスとオブジェクト、カプセル化、継承
- 🤖 **AIへの的確な指示**：セキュリティ要件を含めた指示ができる

---

## 📚 レッスン一覧

### Lesson 01: ファイル操作 📁

**学習時間の目安**：1週間

**何を学ぶ？**

- ファイルの読み込み・書き込み（file_get_contents、fopen）
- CSVファイルの扱い（fgetcsv、fputcsv）
- ディレクトリ操作（mkdir、scandir）
- ファイルアップロード
- **セキュリティ対策**（パストラバーサル、ファイルタイプチェック） 🔒

**実用例**：

- 商品データのCSVインポート・エクスポート
- プロフィール画像のアップロード
- ログファイルの記録

👉 **[Lesson 01の詳細を見る](lessons/01-file-operations/README.md)**

---

### Lesson 02: セッション管理 🔐

**学習時間の目安**：1週間

**何を学ぶ？**

- セッションの仕組み（クライアント・サーバー間の状態保持）
- ログイン機能の実装
- **セキュアなセッション管理**（session_regenerate_id、パスワードハッシュ化） 🔒
- セッションタイムアウト

**実用例**：

- ユーザーログイン・ログアウト
- ログイン状態の保持
- 会員制ページの実装

**セキュリティの重要性**：

- このレッスンは**セキュリティ上最も重要**！
- セッションハイジャック対策、パスワード保護を徹底的に学ぶ

👉 **[Lesson 02の詳細を見る](lessons/02-sessions/README.md)**

---

### Lesson 03: Cookie 🍪

**学習時間の目安**：3-4日

**何を学ぶ？**

- Cookieの仕組み（クライアント側での保存）
- セッションとCookieの違い
- **セキュアなCookie設定**（HttpOnly、Secure、SameSite） 🔒
- Remember Me機能

**実用例**：

- ユーザー設定の保存（テーマ、言語）
- 「次回から自動ログイン」機能
- 訪問回数のカウント

👉 **[Lesson 03の詳細を見る](lessons/03-cookies/README.md)**

---

### Lesson 04: エラーハンドリング ⚠️

**学習時間の目安**：3-4日

**何を学ぶ？**

- エラーの種類（Parse、Fatal、Warning、Notice）
- try-catchによる例外処理
- エラーログの活用
- **本番環境でのエラー表示制御**（セキュリティ） 🔒

**実用例**：

- ファイル操作のエラー処理
- データベース接続エラーの処理
- カスタムエラーページ

👉 **[Lesson 04の詳細を見る](lessons/04-error-handling/README.md)**

---

### Lesson 05: オブジェクト指向プログラミング（OOP）の基礎 🏗️

**学習時間の目安**：1週間

**何を学ぶ？**

- クラスとオブジェクトの概念
- プロパティとメソッド
- コンストラクタ
- アクセス修飾子（public、private、protected）
- 継承の基本

**実用例**：

- Userクラス、Productクラスの作成
- データとメソッドをまとめて管理
- コードの再利用性・保守性の向上

**バイブコーダー向けポイント**：

- 「Userクラスを作って」とAIに指示しやすくなる
- AIが生成したクラス構造を理解・評価できる

👉 **[Lesson 05の詳細を見る](lessons/05-oop-basics/README.md)**

---

## 🏗️ 総合プロジェクト

Phase 2で学んだことを全部使って、実践的なシステムを作ろう！

### プロジェクト1: ログインシステム 🔐

**概要**：ユーザー登録・ログイン・ログアウト機能を持つ会員制サイト

**学べること**：

- セキュアな認証システムの実装
- セッション管理の実践
- パスワード保護
- CSRFトークン

👉 **[login-systemプロジェクトを見る](projects/login-system/README.md)**

---

### プロジェクト2: CSVマネージャー 📊

**概要**：CSVファイルのアップロード・表示・ダウンロード機能

**学べること**：

- セキュアなファイル操作
- エラーハンドリング
- データの表示と加工

👉 **[csv-managerプロジェクトを見る](projects/csv-manager/README.md)**

---

## 📖 推奨学習順序

Phase 2は**順番に学ぶのが超重要**！各レッスンが積み重ねになっています。

```text
Lesson 01（ファイル操作）
   ↓
   ファイルの読み書き、CSV、アップロードを学ぶ
   ↓
Lesson 02（セッション管理）★ 最重要
   ↓
   ログイン機能、セキュアなセッション管理を学ぶ
   ↓
Lesson 03（Cookie）
   ↓
   セッションとの違い、Remember Me機能を学ぶ
   ↓
Lesson 04（エラーハンドリング）
   ↓
   堅牢なコードの書き方を学ぶ
   ↓
Lesson 05（OOP基礎）
   ↓
   コードの構造化、再利用性を学ぶ
   ↓
総合プロジェクト（login-system、csv-manager）
   ↓
   すべてを組み合わせて実践！
```

**各レッスンの推奨ペース**：

1. **レッスン教材を読む**（1-2時間）
2. **実際に手を動かす**（2-3時間）
3. **演習問題に取り組む**（3-4時間）
4. **復習と定着**（1時間）

---

## 🤖 バイブコーダー向けの総合アドバイス

### Phase 2で特に重要なこと

#### 1. セキュリティを最初から組み込む

**悪い習慣**：

```text
まず動くコードを作る → あとでセキュリティ対策を追加
```

**良い習慣**：

```text
最初からセキュリティ対策を含めて指示する
```

**指示の例**：

```text
「CSVファイルアップロード機能を作ってください。
セキュリティ対策として以下を含めてください：
- ファイルサイズ制限（2MB）
- ファイルタイプチェック（拡張子とMIMEタイプ）
- パストラバーサル対策（basename使用）
- XSS対策（htmlspecialchars使用）」
```

#### 2. セキュリティチェックを習慣化する

AIが生成したコードを必ずチェック！

**Phase 2のセキュリティチェックリスト**：

- [ ] **ファイル操作**：パストラバーサル対策、ファイルタイプチェック
- [ ] **セッション**：session_regenerate_id()、パスワードハッシュ化
- [ ] **Cookie**：HttpOnlyフラグ、Secureフラグ、SameSite属性
- [ ] **エラー**：本番環境でエラーを表示しない
- [ ] **XSS対策**：htmlspecialchars()で出力をエスケープ

#### 3. エラーハンドリングを忘れずに

```text
「エラーハンドリングも含めて実装してください。
ファイルが存在しない場合、読み込めない場合の処理も追加してください。」
```

#### 4. AIに段階的に指示する

**良い例**（段階的）：

```text
ステップ1：「ユーザー登録フォームを作ってください」
ステップ2：「パスワードをpassword_hash()でハッシュ化してください」
ステップ3：「ユーザー名の重複チェックを追加してください」
ステップ4：「バリデーション（空欄チェック、パスワード長チェック）を追加してください」
```

---

## 💡 学習のヒント

### つまずいたときは

1. **レッスンに戻る**
   - 関連するレッスンを復習
   - コード例を見直す

2. **AIに質問する**
   - エラーメッセージを見せて質問
   - 「このコードにセキュリティ上の問題はありますか？」と聞く

3. **セキュリティを優先する**
   - 機能が動いても、セキュリティ対策がないと意味がない
   - セキュリティチェックリストを活用

4. **小さく始める**
   - いきなり複雑な機能を作らない
   - シンプルなものから始めて、徐々に拡張

---

## ✅ Phase 2で身につく力

### 技術スキル

- ✅ ファイルの読み書き、CSVファイルの操作
- ✅ セキュアなログイン機能の実装
- ✅ セッションとCookieの使い分け
- ✅ 適切なエラーハンドリング
- ✅ OOPの基礎（クラス、オブジェクト、継承）

### バイブコーディングスキル

- ✅ セキュリティ要件を含めた的確な指示
- ✅ 生成されたコードのセキュリティチェック
- ✅ 脆弱性の発見と修正指示
- ✅ エラーハンドリングの実装指示

### セキュリティ意識（最重要！）

- ✅ パストラバーサル攻撃の危険性と対策
- ✅ セッションハイジャック攻撃の危険性と対策
- ✅ パスワード保護の重要性（ハッシュ化）
- ✅ XSS対策の習慣化
- ✅ 本番環境でのエラー表示制御

---

## 🚀 次のステップ：Phase 3へ

Phase 2を終えたら、**Phase 3: MySQL基礎編**へ進もう！

Phase 3では：

- データベースの概念とSQLの基本
- phpMyAdminの使い方
- CRUD操作（CREATE、READ、UPDATE、DELETE）
- テーブル設計の基礎

を学ぶよ！

Phase 2で学んだファイル操作とセッション管理の知識を使いながら、データベースと連携する方法を学んでいく！

👉 **[Phase 3: MySQL基礎編へ進む](../phase3-mysql-basics/README.md)**

---

## 📝 まとめ

Phase 2は、**実践的なWebアプリケーション開発の基礎**を学ぶPhase！

- ファイル操作、セッション管理、Cookie、エラーハンドリング、OOPの基礎
- **セキュリティを最優先**に、安全なコードを書く習慣を身につける
- AIと協働して、効率的に開発する方法を学ぶ

焦らず、楽しみながら、一歩ずつ進んでいこう！

AIがいつでもあなたの学習をサポートしてくれるから、「わからない」を恐れずにチャレンジしよう！💪

---

**Let's vibe and code! 🎉**

さあ、Lesson 01からスタートして、実践的なPHPの世界に飛び込もう！

👉 **[Lesson 01: ファイル操作へ進む](lessons/01-file-operations/README.md)**
