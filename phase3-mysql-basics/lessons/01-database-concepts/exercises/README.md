# Lesson 01: データベースとは - 演習問題 💪

この演習では、データベースの基本概念とテーブル設計を練習するよ！

---

## 📝 基礎編

### 問題1-1: Excelとデータベースの対応関係

以下のExcelデータを見て、データベースのテーブル構造に変換してください。

**Excelシート「生徒名簿」**：

| ID  | 名前 | 年齢 | クラス |
| --- | ---- | ---- | ------ |
| 1   | 太郎 | 15   | A組    |
| 2   | 花子 | 16   | B組    |
| 3   | 次郎 | 15   | A組    |

**答えるべき内容**：

1. テーブル名は何にすべきか？
2. カラム名を列挙してください
3. どのカラムが主キーになるべきか？
4. 各カラムのデータ型は何が適切か？

---

### 問題1-2: 主キーの理解

以下のテーブルで、主キーとして適切なカラムを選んでください。理由も説明してください。

**studentsテーブル**：

| student_id | name | email               | phone        |
| ---------- | ---- | ------------------- | ------------ |
| 1          | 太郎 | <taro@example.com>    | 090-1234-5678|
| 2          | 花子 | <hanako@example.com>  | 090-2345-6789|
| 3          | 次郎 | <jiro@example.com>    | 090-3456-7890|

**選択肢**：

- A: `name`
- B: `email`
- C: `phone`
- D: `student_id`

---

### 問題1-3: 外部キーの理解

以下の2つのテーブルを見て、質問に答えてください。

**authorsテーブル**（著者）：

| id  | name   |
| --- | ------ |
| 1   | 夏目漱石 |
| 2   | 芥川龍之介 |

**booksテーブル**（書籍）：

| id  | author_id | title      |
| --- | --------- | ---------- |
| 1   | 1         | 吾輩は猫である |
| 2   | 1         | 坊っちゃん   |
| 3   | 2         | 羅生門      |

**質問**：

1. 外部キーはどのカラムですか？
2. `author_id = 1`の書籍は何冊ありますか？
3. 「羅生門」の著者は誰ですか？

---

## 🎯 応用編

### 問題1-4: ブログシステムのテーブル設計

以下の要件を満たすブログシステムのテーブルを設計してください。

**要件**：

- ユーザーは複数の投稿を書ける
- ユーザー情報：ID、名前、メールアドレス、登録日時
- 投稿情報：ID、タイトル、本文、投稿日時
- 投稿は必ずユーザーに紐づく

**設計するもの**：

1. `users`テーブルのカラム構成
2. `posts`テーブルのカラム構成
3. 主キーと外部キーの指定
4. 各カラムの制約（NOT NULL、UNIQUE等）

---

### 問題1-5: ECサイトの商品管理

以下の要件を満たすECサイトの商品管理テーブルを設計してください。

**要件**：

- カテゴリがあり、各商品は1つのカテゴリに属する
- カテゴリ情報：ID、カテゴリ名
- 商品情報：ID、商品名、価格、在庫数、カテゴリ

**設計するもの**：

1. `categories`テーブルのカラム構成
2. `products`テーブルのカラム構成
3. 主キーと外部キーの指定
4. テーブル間の関係性（1対多）の説明

---

## 🔍 セキュリティチャレンジ

### 問題1-6: データの重複を発見せよ

以下のテーブル設計には問題があります。どこが問題で、どう修正すべきか答えてください。

**悪いテーブル設計**：

**ordersテーブル**（注文）：

| id  | customer_name | customer_email      | customer_phone | product_name | price |
| --- | ------------- | ------------------- | -------------- | ------------ | ----- |
| 1   | 太郎          | <taro@example.com>    | 090-1111-1111  | ノートPC     | 80000 |
| 2   | 太郎          | <taro@example.com>    | 090-1111-1111  | マウス       | 2000  |
| 3   | 花子          | <hanako@example.com>  | 090-2222-2222  | キーボード   | 5000  |

**質問**：

1. どのデータが重複していますか？
2. この設計の問題点を3つ挙げてください
3. どのようにテーブルを分割すべきか提案してください

---

## 🌟 総合チャレンジ

### 問題1-7: タスク管理システムの設計

以下の要件を満たすタスク管理システムのデータベースを設計してください。

**要件**：

- ユーザーは複数のプロジェクトを持てる
- 各プロジェクトには複数のタスクがある
- ユーザー情報：ID、名前、メールアドレス
- プロジェクト情報：ID、プロジェクト名、作成日
- タスク情報：ID、タスク名、完了状態（完了/未完了）、期限

**設計するもの**：

1. 必要なテーブルを全て列挙
2. 各テーブルのカラム構成
3. 主キーと外部キーの指定
4. テーブル間の関係性を図で表現（テキストでOK）

**例**：

```text
users（1） → projects（多）
projects（1） → tasks（多）
```

---

## 🤖 AI活用チャレンジ

### 問題1-8: AIにテーブル設計を依頼しよう

以下のシナリオで、AIに適切な指示を出してテーブル設計をしてもらってください。

**シナリオ**：図書館の本の貸し出し管理システム

**要件**：

- 会員情報を管理する
- 本の情報を管理する
- 貸し出し履歴を記録する
- 誰がどの本をいつ借りたか、いつ返却したかを管理

**あなたのタスク**：

1. AIに出す指示を書いてください（具体的に！）
2. AIが生成したテーブル設計をチェックリストで評価してください
3. 問題があれば、修正指示を出してください

**チェックリスト**：

- [ ] 主キーが全てのテーブルに設定されているか
- [ ] 外部キーで適切に紐づいているか
- [ ] データの重複がないか
- [ ] 命名規則が統一されているか（スネークケース、複数形）
- [ ] 必要な制約（NOT NULL、UNIQUE等）が設定されているか

---

## 💡 ヒント

困ったときは、以下を見直してね！

### 基礎編のヒント

- **問題1-1**：Excelのシート名がテーブル名のヒント
- **問題1-2**：主キーは「ユニーク」で「変わらない」もの
- **問題1-3**：外部キーは他のテーブルのidを参照するカラム

### 応用編のヒント

- **問題1-4**：1人のユーザー → 複数の投稿（1対多）
- **問題1-5**：1つのカテゴリ → 複数の商品（1対多）

### セキュリティチャレンジのヒント

- **問題1-6**：同じデータが何度も出てくる = 重複！

### 総合チャレンジのヒント

- **問題1-7**：users → projects、projects → tasksの2段階の関係
- **問題1-8**：members、books、lendingsの3つのテーブルが必要そう

---

## ✅ 解答を確認しよう

演習が終わったら、解答例を見て答え合わせをしよう！

👉 **[解答例を見る](solutions/README.md)**

---

**Let's vibe and code! 🎉**

手を動かして、データベース設計の感覚をつかもう！
