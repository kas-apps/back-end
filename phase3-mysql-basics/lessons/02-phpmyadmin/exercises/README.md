# Lesson 02: phpMyAdminの使い方 - 演習問題 💪

このレッスンで学んだphpMyAdminの操作を実際に試してみよう！

---

## 📝 演習の進め方

1. **まずGUIで操作してみる**：phpMyAdminのGUIを使って操作
2. **次にSQLタブで同じことをやってみる**：SQLクエリで同じ操作を実行
3. **両方の方法を理解する**：GUIとSQLの違いと共通点を理解する

---

## 🎯 基礎編

### 演習 1-1: データベースの作成

**課題**：

phpMyAdminを使って、`practice_db` という名前のデータベースを作成してください。

**手順**：

1. phpMyAdminにアクセス
2. 「新規作成」をクリック
3. データベース名に `practice_db` を入力
4. 照合順序は `utf8mb4_general_ci` を選択
5. 「作成」ボタンをクリック

**確認方法**：

左側のサイドバーに `practice_db` が表示されることを確認

---

### 演習 1-2: テーブルの作成（GUI）

**課題**：

`practice_db` データベース内に、以下の構造の `products` テーブルを作成してください。

**テーブル構造**：

| カラム名   | データ型    | 長さ | NULL許可 | その他                     |
| ---------- | ----------- | ---- | -------- | -------------------------- |
| id         | INT         |      | No       | 主キー、AUTO_INCREMENT     |
| name       | VARCHAR     | 200  | No       |                            |
| price      | INT         |      | No       |                            |
| stock      | INT         |      | No       | デフォルト値: 0            |
| created_at | TIMESTAMP   |      | No       | デフォルト: CURRENT_TIMESTAMP |

**手順**：

1. `practice_db` を選択
2. 「新しいテーブルを作成する」セクションで：
   - テーブル名：`products`
   - カラム数：`5`
3. 各カラムの詳細を上記の表の通りに設定
4. 「保存」ボタンをクリック

**確認方法**：

- 左側のサイドバーに `products` テーブルが表示される
- 「構造」タブでカラムの設定を確認

---

### 演習 1-3: データの挿入（GUI）

**課題**：

`products` テーブルに、以下のデータを挿入してください（GUIを使用）。

**データ1**：
- name: `ノートパソコン`
- price: `80000`
- stock: `5`

**データ2**：
- name: `マウス`
- price: `1500`
- stock: `20`

**データ3**：
- name: `キーボード`
- price: `3000`
- stock: `10`

**手順**：

1. `products` テーブルを選択
2. 「挿入」タブをクリック
3. 各フィールドに値を入力（id と created_at は空欄でOK）
4. 「実行」ボタンをクリック
5. 2つ目、3つ目のデータも同様に挿入

**確認方法**：

「表示」タブで3件のデータが表示されることを確認

---

### 演習 1-4: データの検索（表示）

**課題**：

`products` テーブルのデータを表示して、以下を確認してください：

1. 全てのデータが正しく挿入されているか
2. `id` が自動で採番されているか（1, 2, 3）
3. `created_at` に現在時刻が自動で入っているか
4. `stock` のデフォルト値が設定されているか

**手順**：

1. `products` テーブルを選択
2. 「表示」タブをクリック

---

### 演習 1-5: データの編集（GUI）

**課題**：

`マウス` の在庫（stock）を `20` から `15` に変更してください。

**手順**：

1. 「表示」タブでデータを表示
2. 「マウス」の行の「編集」アイコン（鉛筆マーク）をクリック
3. `stock` の値を `15` に変更
4. 「実行」ボタンをクリック

**確認方法**：

「表示」タブで、マウスの在庫が `15` になっていることを確認

---

## 🚀 応用編

### 演習 2-1: SQLタブでデータ挿入

**課題**：

SQLタブを使って、以下の2つの商品を一度に挿入してください。

**データ**：
- name: `モニター`, price: `25000`, stock: `8`
- name: `Webカメラ`, price: `5000`, stock: `12`

**ヒント**：

```sql
INSERT INTO products (name, price, stock) VALUES
('商品名1', 価格1, 在庫1),
('商品名2', 価格2, 在庫2);
```

**確認方法**：

「表示」タブで5件のデータが表示されることを確認

---

### 演習 2-2: SQLタブでデータ検索

**課題**：

SQLタブを使って、以下の条件でデータを検索してください。

**条件1**：価格が10000円以上の商品を検索

**ヒント**：

```sql
SELECT * FROM products WHERE price >= 10000;
```

**条件2**：在庫が10個以下の商品を検索

**ヒント**：

```sql
SELECT * FROM products WHERE stock <= 10;
```

**確認方法**：

実行結果に、条件に合った商品だけが表示されることを確認

---

### 演習 2-3: SQLタブでデータ更新

**課題**：

SQLタブを使って、`ノートパソコン` の在庫を `3` に更新してください。

**ヒント**：

```sql
UPDATE products SET stock = 3 WHERE name = 'ノートパソコン';
```

**⚠️ 注意**：

`WHERE` 句を忘れると、全ての商品の在庫が3になってしまう！必ず条件を指定しよう。

**確認方法**：

「表示」タブで、ノートパソコンの在庫が `3` になっていることを確認

---

## 🔒 実践編：セキュリティ意識を高める

### 演習 3-1: WHERE句の重要性を体験

**課題**：

以下の危険なSQLを実行して、WHERE句の重要性を体験してください。

**ステップ1：バックアップを取る**

1. `products` テーブルの「エクスポート」タブをクリック
2. SQL形式でエクスポート
3. `products_backup.sql` として保存

**ステップ2：危険なUPDATE文を実行**

```sql
-- ⚠️ 危険：WHERE句がないので全てのレコードが更新される
UPDATE products SET stock = 0;
```

**実行後、何が起きた？**

「表示」タブで確認してください。全ての商品の在庫が `0` になっているはず！

**ステップ3：バックアップから復元**

1. 「インポート」タブをクリック
2. `products_backup.sql` を選択
3. 「実行」ボタンをクリック

**学んだこと**：

- WHERE句がないUPDATE/DELETE文は超危険！
- バックアップの重要性
- 本番環境では絶対にWHERE句なしでUPDATE/DELETEしない

---

### 演習 3-2: データのエクスポート

**課題**：

`practice_db` データベース全体をエクスポートして、バックアップファイルを作成してください。

**手順**：

1. phpMyAdminで `practice_db` を選択
2. 「エクスポート」タブをクリック
3. エクスポート方法：「簡易」を選択
4. フォーマット：「SQL」を選択
5. 「実行」ボタンをクリック

**確認方法**：

`practice_db.sql` ファイルがダウンロードされることを確認

---

### 演習 3-3: データのインポート（新しいデータベースに復元）

**課題**：

エクスポートしたファイルを使って、新しいデータベースにデータを復元してください。

**手順**：

1. 新しいデータベース `practice_db_backup` を作成
2. `practice_db_backup` を選択
3. 「インポート」タブをクリック
4. エクスポートした `practice_db.sql` を選択
5. 「実行」ボタンをクリック

**確認方法**：

`practice_db_backup` 内に `products` テーブルとデータが復元されていることを確認

---

## 💡 チャレンジ問題

### チャレンジ 1: 複数テーブルの作成

**課題**：

以下の2つのテーブルを作成し、関連付けてください。

**categoriesテーブル**：

| カラム名 | データ型 | 長さ | NULL許可 | その他                 |
| -------- | -------- | ---- | -------- | ---------------------- |
| id       | INT      |      | No       | 主キー、AUTO_INCREMENT |
| name     | VARCHAR  | 100  | No       |                        |

**productsテーブル（改良版）**：

既存の `products` テーブルに `category_id` カラムを追加してください。

| カラム名    | データ型 | 長さ | NULL許可 | その他     |
| ----------- | -------- | ---- | -------- | ---------- |
| category_id | INT      |      | Yes      | 外部キー   |

**手順**：

1. `categories` テーブルを作成
2. `products` テーブルに `category_id` カラムを追加
3. `categories` テーブルにカテゴリデータを挿入（例：PC周辺機器、家電、文房具）
4. `products` テーブルの各商品に `category_id` を設定

**ヒント（カラムの追加）**：

```sql
ALTER TABLE products ADD COLUMN category_id INT;
```

---

### チャレンジ 2: AIへのSQL生成指示

**課題**：

演習で作成した `products` テーブルと同じ構造のテーブルを作成するSQL文を、AIに生成してもらってください。

**AIへの指示例**：

```text
「MySQLで、以下の構造のproductsテーブルを作成するCREATE TABLE文を書いてください：
- id：INT型、主キー、AUTO_INCREMENT
- name：VARCHAR(200)型、NOT NULL
- price：INT型、NOT NULL
- stock：INT型、NOT NULL、デフォルト値は0
- created_at：TIMESTAMP型、デフォルトはCURRENT_TIMESTAMP

テーブル名はproductsで、文字コードはutf8mb4を使用してください。」
```

**確認**：

AIが生成したSQLを、phpMyAdminのSQLタブで実行して、正しく動作することを確認してください（別のデータベースやテーブル名で試すと良いでしょう）。

---

## 🎓 演習を終えて

お疲れさま！これらの演習を通じて：

- ✅ phpMyAdminのGUI操作をマスターした
- ✅ SQLタブでクエリを実行できるようになった
- ✅ エクスポート・インポートでバックアップができるようになった
- ✅ WHERE句の重要性を体験した
- ✅ AIへの指示でSQLを生成できるようになった

次のステップでは、SQLの基本操作（CRUD）を詳しく学んでいくよ！

👉 **[解答例を見る](solutions/README.md)**

---

**Let's vibe and code! 🎉**
